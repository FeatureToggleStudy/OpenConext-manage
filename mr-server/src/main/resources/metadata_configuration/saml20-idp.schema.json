{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "title": "saml20-idp",
  "definitions": {
    "AssertionConsumerServiceBinding": {
      "type": "string",
      "enum": [
        "urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Redirect",
        "urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST",
        "urn:oasis:names:tc:SAML:2.0:bindings:SOAP",
        "urn:oasis:names:tc:SAML:2.0:bindings:PAOS",
        "urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Artifact",
        "urn:oasis:names:tc:SAML:2.0:bindings:URI"
      ],
      "default": "urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST"
    },
    "NameIDFormat": {
      "type": "string",
      "enum": [
        "urn:oasis:names:tc:SAML:1.1:nameid-format:unspecified",
        "urn:oasis:names:tc:SAML:2.0:nameid-format:transient",
        "urn:oasis:names:tc:SAML:2.0:nameid-format:persistent"
      ],
      "default": "urn:oasis:names:tc:SAML:2.0:nameid-format:persistent"
    },
    "ArpAttribute": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "source": {
            "type": "string"
          },
          "value": {
            "type": "string"
          }
        }
      }
    }
  },
  "type": "object",
  "properties": {
    "entityid": {
      "type": "string"
    },
    "state": {
      "type": "string",
      "enum": [
        "prodaccepted",
        "testaccepted"
      ]
    },
    "allowedall": {
      "type": "string",
      "enum": [
        "yes",
        "no"
      ],
      "format": "boolean"
    },
    "NameIDFormat": {
      "$ref": "#/definitions/NameIDFormat"
    },
    "OrganizationDisplayName:en": {
      "type": "string"
    },
    "OrganizationDisplayName:nl": {
      "type": "string"
    },
    "OrganizationName:en": {
      "type": "string"
    },
    "OrganizationName:nl": {
      "type": "string"
    },
    "OrganizationURL:en": {
      "type": "string",
      "format": "uri"
    },
    "OrganizationURL:nl": {
      "type": "string",
      "format": "uri"
    },
    "active": {
      "type": "boolean"
    },
    "allowedEntities": {
      "items": {},
      "type": "array"
    },
    "arp": {
      "type": "object",
      "properties": {
        "_class": {
          "type": "string",
          "default": "mr.migration.ArpAttributes"
        },
        "enabled": {
          "type": "boolean"
        },
        "attributes": {
          "properties": {
            "urn:mace:dir:attribute-def:eduPersonTargetedID": {
              "$ref": "#/definitions/ArpAttribute"
            },
            "urn:mace:dir:attribute-def:eduPersonPrincipalName": {
              "$ref": "#/definitions/ArpAttribute"
            },
            "urn:mace:dir:attribute-def:displayName": {
              "$ref": "#/definitions/ArpAttribute"
            },
            "urn:mace:dir:attribute-def:cn": {
              "$ref": "#/definitions/ArpAttribute"
            },
            "urn:mace:dir:attribute-def:givenName": {
              "$ref": "#/definitions/ArpAttribute"
            },
            "urn:mace:dir:attribute-def:sn": {
              "$ref": "#/definitions/ArpAttribute"
            },
            "urn:mace:dir:attribute-def:mail": {
              "$ref": "#/definitions/ArpAttribute"
            },
            "urn:mace:terena.org:attribute-def:schacHomeOrganization": {
              "$ref": "#/definitions/ArpAttribute"
            },
            "urn:mace:terena.org:attribute-def:schacHomeOrganizationType": {
              "$ref": "#/definitions/ArpAttribute"
            },
            "urn:schac:attribute-def:schacPersonalUniqueCode": {
              "$ref": "#/definitions/ArpAttribute"
            },
            "urn:mace:dir:attribute-def:eduPersonAffiliation": {
              "$ref": "#/definitions/ArpAttribute",
              "multiplicity": true
            },
            "urn:mace:dir:attribute-def:eduPersonScopedAffiliation": {
              "$ref": "#/definitions/ArpAttribute",
              "multiplicity": true
            },
            "urn:mace:dir:attribute-def:eduPersonEntitlement": {
              "$ref": "#/definitions/ArpAttribute",
              "multiplicity": true
            },
            "urn:mace:dir:attribute-def:eduPersonOrcid": {
              "$ref": "#/definitions/ArpAttribute"
            },
            "urn:mace:dir:attribute-def:isMemberOf": {
              "$ref": "#/definitions/ArpAttribute",
              "multiplicity": true
            },
            "urn:mace:dir:attribute-def:uid": {
              "$ref": "#/definitions/ArpAttribute"
            },
            "urn:mace:dir:attribute-def:preferredLanguage": {
              "$ref": "#/definitions/ArpAttribute"
            },
            "urn:mace:surffederatie.nl:attribute-def:nlEduPersonOrgUnit": {
              "$ref": "#/definitions/ArpAttribute",
              "deprecated" : true,
              "multiplicity": true
            },
            "urn:mace:surffederatie.nl:attribute-def:nlEduPersonStudyBranch": {
              "$ref": "#/definitions/ArpAttribute",
              "deprecated" : true,
              "multiplicity": true
            },
            "urn:mace:surffederatie.nl:attribute-def:nlStudielinkNummer": {
              "$ref": "#/definitions/ArpAttribute",
              "deprecated" : true
            },
            "urn:mace:surffederatie.nl:attribute-def:nlDigitalAuthorIdentifier": {
              "$ref": "#/definitions/ArpAttribute",
              "deprecated" : true
            },
            "urn:oid:1.3.6.1.4.1.1076.20.40.40.1": {
              "$ref": "#/definitions/ArpAttribute",
              "displayName": "collabPersonId",
              "deprecated" : true
            }
          }
        }
      }
    }
  },
  "patternProperties": {
    "^AssertionConsumerService:([0-9]{1}):Binding$": {
      "$ref": "#/definitions/AssertionConsumerServiceBinding",
      "multiplicity": 10
    },
    "^AssertionConsumerService:([0-9]{1}):Location$": {
      "type": "string",
      "format": "uri",
      "multiplicity": 10
    },
    "^AssertionConsumerService:([0-9]{1}):index$": {
      "type": "string",
      "format": "number"
    },
    "^NameIDFormats:([0-2]{1})$": {
      "$ref": "#/definitions/NameIDFormat"
    },
    "^contacts:([0-3]{1}):surName$": {
      "type": "string"
    },
    "^contacts:([0-3]{1}):givenName$": {
      "type": "string"
    },
    "^contacts:([0-3]{1}):emailAddress$": {
      "type": "string",
      "format" : "email"
    },
    "^contacts:([0-3]{1}):contactType$": {
      "type": "string",
      "enum" : [
        "technical",
        "support",
        "administrative",
        "billing",
        "other"
      ]
    }
  },
  "required": [
    "entityid",
    "state",
    "allowedall",
    "AssertionConsumerService:0:Binding",
    "AssertionConsumerService:0:Location",
    "NameIDFormat"
  ],
  "additionalProperties": false,
  "indexes": [
    {
      "name": "autocomplete_text_query",
      "type": "text",
      "fields": [
        "entityid",
        "name:en",
        "name:nl",
        "description:en",
        "description:nl"
      ]
    }
  ]
}